<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>ShareFish-修改头像</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src="static/js/public.js"></script>

    <!-- Main Style CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- App css搜索框 -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="static/css/icons.min.css" rel="stylesheet" type="text/css">
    <link href="static/css/app.min.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" type="text/css" href="css/aui.css" />
    <link rel="stylesheet" href="css/intial.css" />

</head>

<body style="background-color: black;">


    <header>
        <div class="header-wrapper border-bottom">
            <div class="container space-y--15">
                <div class="row align-items-center">
                    <div class="col-auto">
                        <a class="back-link" onClick="javascript :history.back(-1);"> <i class="fa fa-angle-left"></i>
                            返回</a>
                    </div>
                </div>
            </div>
        </div>

    </header>

    <div id="addCommodityIndex">
        <div class="input-group row">

            <div class="col-sm-9 big-photo">
                <div id="preview" style="width: 400px;
                height: 600px;
                display: table-cell;
                vertical-align: middle;
                text-align: center;">

                    <section class="aui-text-center">
                        <div id="headimg">
                            <img id="tx" src="assets/img/profile.jpg" style="height: 12rem;">
                        </div>
                        <span class="btn">
                            点击设置头像
                        </span>
                    </section>
                    <!--图片裁剪-->
                    <div class="clipbg displaynone">
                        <div id="clipArea"></div>
                        <div class="loading displaynone">正在载入图片...</div>
                        <div class="footer">
                            <dl>
                                <dd style="background: #fe1041; color: #ffffff;border: none;">打开相册<input type="file"
                                        id="file" accept="image/*"></dd>
                                <dd id="clipBtn">完成裁剪</dd>
                            </dl>
                            <div class="back">取消</div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <script src="assets/js/jquery-3.4.1.min.js"></script>
        <!-- Bootstrap JS -->
        <script src="assets/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/hammer.min.js"></script>
        <script type="text/javascript" src="js/lrz.all.bundle.js"></script>
        <script type="text/javascript" src="js/iscroll-zoom-min.js"></script>
        <script type="text/javascript" src="js/PhotoClip.js"></script>
        <script>
            $(".btn").click(function () {
                $(".clipbg").fadeIn()
            })
            var clipArea = new PhotoClip("#clipArea", {
                size: [300, 300],//裁剪框大小
                outputSize: [0, 0],//打开图片大小，[0,0]表示原图大小
                file: "#file",
                ok: "#clipBtn",
                loadStart: function () { //图片开始加载的回调函数。this 指向当前 PhotoClip 的实例对象，并将正在加载的 file 对象作为参数传入。（如果是使用非 file 的方式加载图片，则该参数为图片的 url）
                    $(".loading").removeClass("displaynone");

                },
                loadComplete: function () {//图片加载完成的回调函数。this 指向当前 PhotoClip 的实例对象，并将图片的 <img> 对象作为参数传入。
                    $(".loading").addClass("displaynone");

                },
                done: function (dataURL) { //裁剪完成的回调函数。this 指向当前 PhotoClip 的实例对象，会将裁剪出的图像数据DataURL作为参数传入。			
                    console.log(dataURL);//dataURL裁剪后图片地址base64格式提交给后台处理
                    $('#tx').attr("src", dataURL);
                    $(".clipbg").fadeOut()
                }
            });
            $(".back").click(function () {
                $(".clipbg").fadeOut()
            })
        </script>
</body>

</html>