{{ define "Static/post-need.html" }}
<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <title>Share Fish-发布需求</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description">
    <meta content="" name="author">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="share/static/js/public.js"></script>
    <link rel="stylesheet" href="share/css/tabbar.css">
    <link rel="stylesheet" href="share/css/not-login.css">
    <link rel="stylesheet" href="share/css/materialize2.css">
    <link rel="stylesheet" href="share/assets/css/style.css">
    <!-- App css -->
    <link href="share/static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="share/static/css/icons.min.css" rel="stylesheet" type="text/css">
    <link href="share/static/css/app.min.css" rel="stylesheet" type="text/css">
</head>
{{if eq "" .userName}}
    <div class="slider" style=" position: fixed;
        left: 0;
        bottom: 86px;
        width: 100%;
        height: 49px;
        line-height: 49px;
        z-index: 1010;">
        <ul class="slides" style="background: none;">
            <li><img src="" alt="">
                <div class="caption slider-content center-align ">
                    <span style="font-size: 15px;">登录Share Fish打开精彩世界</span>
                    <a href="../login" class="button-default" style="float: right;">立即登录</a>
                </div>
            </li>
        </ul>
    </div>
{{else}}


<body id="body" class="dark-sidebar">
<header>
    <div class="header-wrapper border-bottom">
        <div class="container space-y--15">
            <div class="row align-items-center">
                <div class="col-auto">
                    <a class="back-link" onClick="javascript :history.back(-1);"> <i class="fa fa-angle-left"></i>
                        返回</a>
                </div>
                <div class="col d-flex justify-content-center">
                    <div class="header-search">
                        <div class="input-group">
                            <h4 style="    padding-top: 18px;">发布需求</h4>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <!-- header menu trigger -->
                    <button class="header-menu-trigger" id="header-menu-trigger">
                        <i class="fas fa-align-right" style="font-size: 20px;
                                color: grey;"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

</header>

{{ template "Static/menu.html" . }}

<div class="breadcrumb-area bg-color--grey space-y--15">
</div>
<div class="page-wrapper">

    <!-- Page Content-->
    <div class="page-content-tab">

        <div class="container-fluid">
            <!-- Page-Title -->

            <!-- end page title end breadcrumb -->
            <div class="row">
                <div class="col-12">
                    <div class="card">


                        <div class="card-body p-0">
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-bs-toggle="tab" href="#Post" role="tab"
                                       aria-selected="true">发布需求</a>
                                </li>
                            </ul>

                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div class="tab-pane p-3 active" id="Post" role="tabpanel">
                                    <div class="row">
                                        {{/*
                                        <form method="post" action="" id="needForm">*/}}
                                            <div class="col-md-6">
                                                <label class="form-label">物品类别</label>
                                                <select class="form-select" aria-label="Default select example">
                                                    {{ range $key ,$value:=.StickList }}
                                                    {{if ne $value.Sticks ""}}
                                                    <option selected="">{{$value.Sticks}}</option>
                                                    {{end}}
                                                    {{end}}
                                                    <option>其他</option>
                                                </select>
                                            </div>
                                            <div class="row g-3 align-items-center">
                                                <div class="col-md-12" style="    height: 500px;">
                                                    <label for="addnote" class="form-label" style="padding-left: 16px;
                                                        padding-top: 20px;">需求描述</label>
                                                    <textarea class="form-control" id="addnote" rows="3"
                                                              name="addnote" style="    height: 460px;"></textarea>
                                                    <p id="p_describe"></p>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary mt-4" id="needBtn">确认发布</button>
                                            {{/*
                                        </form>
                                        */}}
                                    </div>
                                    <!--end row-->
                                </div>

                            </div> <!-- end row -->
                        </div>
                    </div>
                    <!--end card-body-->
                </div>
                <!--end card-->
            </div>
            <!--end col-->
        </div>
        <!--end row-->
    </div><!-- container -->
</div>
<!-- end page content -->
</div>

<!-- end page-wrapper -->
<footer style="padding-bottom: 100px;">

    <div class="sc-bottom-bar">
        <a class="sc-menu-item " href="../index"><i class="fas fa-home"></i></a>
        <a class="sc-menu-item " href="../goods-category"><i class="fas  fa-list"></i></a>
        <a href="../chat" class="sc-menu-item sc-current"><i class="fas fa-plus"></i></a>
        <a class="sc-menu-item" href="../select_chat_list"><i class="fas fa-comments"></i></a>
        <a class="sc-nav-indicator"></a>
        <a class="sc-menu-item" href="../ui-me"><i class="fas fa-user"></i></a>
    </div>

</footer>
{{end}}
<!-- App js -->
<script src="share/static/js/app.js"></script>
<script src="share/js/tabbar.js"></script>
<!-- jQuery JS -->
<script src="share/assets/js/jquery-3.4.1.min.js"></script>
<!-- Bootstrap JS -->
<script src="share/assets/js/bootstrap.min.js"></script>
<!-- Main JS -->
<script src="share/assets/js/main.js"></script>
<script src="share/js/popbox.js"></script>
<script src="share/post--need.js"></script>
<script src="share/js/pop-message.js"></script>
<script type="text/javascript" src="share/static/js/logout.js"></script>
<script src="share/js/materialize.min.js"></script>
<script src="share/js/sliderbg.js"></script>
<script>

    //鼠标移开需求描述框开始验证
    $("#addnote").blur(function () {
        var addnote = $("#addnote").val();
        if (addnote == "") {
            $("#p_describe").html("<font color=\"red\" size=\"2\">商品描述不能为空！</font>");
        } else {
            $("#p_describe").html("<font color=\"green\" size=\"2\">商品描述格式正确！</font>");
        }
    })
    //鼠标放置需求描述框不验证
    $("#addnote").focus(function () {
        $("#p_describe").html("");
    })

    $("#needBtn").click(function () {
            demandKinds = $(".form-select").val()
            demandName = $("#addnote").val()
            console.log(demandKinds, "-----", demandName)
            if (demandName != "") {
                $.ajax({
                    url: "/addDemandPost",
                    type: "post",
                    async: false,
                    dataType: "json",
                    data: {'demandKinds': demandKinds, 'demandName': demandName},
                    success: function (data) {
                        if (data.data=="请先登录"){
                            alert("请先登录")
                        }else {
                            console.log("ok")
                            window.location = "/chat"
                        }
                    },

                })
            }else {
                alert("需求描述不能为空！")
            }
        }
    )


</script>
<script type="text/javascript">

    function uploadIitems() {
        var str = document.getElementById("text").value;
        $.ajax
        ({
            url: "/lend-items",
            dataType: "json",
            type: "post",
            data: {
                address: str,
                key: "7486e10d3ca83a934438176cf941df0c",
            },
            success: function (res) {

                console.log(res);  //在console中查看数据
            },
            error: function () {
                alert('failed!');
            },
        });
    }
</script>

<script type="text/javascript">
    $(function () {
        //绑定滚动条事件
        //绑定滚动条事件
        $(window).bind("scroll", function () {
            var sTop = $(window).scrollTop();
            var sTop = parseInt(sTop);
            if (sTop >= 10) {
                if (!$("#scrollBg").is(":visible")) {
                    try {
                        $("#scrollBg").slideDown();
                    } catch (e) {
                        $("#scrollBg").show();
                    }
                }
            } else {
                if ($("#scrollBg").is(":visible")) {
                    try {
                        $("#scrollBg").slideUp();
                    } catch (e) {
                        $("#scrollBg").hide();
                    }
                }
            }
        });
    })
</script>
</body>
{{ end }}
</html>